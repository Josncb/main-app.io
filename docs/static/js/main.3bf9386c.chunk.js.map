{"version":3,"sources":["redux/index.ts","redux/midPromise1.ts","redux/model/reducers/golbal.ts","redux/model/index.ts","redux/model/actions/golbal.ts","router/resgisterApps.tsx","views/home/index.tsx","views/my/index.tsx","router/index.tsx","index.tsx","redux/model/api.ts"],"names":["middleware","thunk","enhancer","global","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","promiseMiddleware","store","createStore","combineReducers","axios","defaults","withCredentials","headers","localStorage","getItem","windowObj","windows","next","action","dispatch","getState","promise","type","rest","Promise","resolve","reject","REQUEST","SUCCESS","FAILURE","onRejected","error","then","result","data","error_code","error_msg","errorMsg","info","Number","title","HR","showToast","location","href","text","catch","initState","golbal","state","GETPUBLICINFO","publicInfo","public_info","client","post","Api","Render","props","appContent","loading","className","dangerouslySetInnerHTML","__html","render","container","document","getElementById","ReactDOM","genActiveRule","routerPrefix","pathname","startsWith","registerMicroApps","name","entry","activeRule","beforeLoad","app","console","log","beforeMount","afterUnmount","start","prefetch","jsSandbox","singular","fetch","window","App","My","dd","this","get_public_info","onClick","get_info","bind","Component","routes","path","tip","component","connect","StrictMode","basename","to","map","route","i","rout","key","id","rootApi","urlConfig","getTime","buryingErrMsg","getPublicInfo"],"mappings":"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","file":"static/js/main.3bf9386c.chunk.js","sourcesContent":["import {\n  createStore,\n  applyMiddleware,\n  compose\n} from 'redux';\nimport thunk from 'redux-thunk';\nimport combineReducers from './model/index';\nimport promiseMiddleware from './midPromise1';\n\nconst middleware = [ thunk ]\n\nconst composeEnhancers =\n  typeof global === 'object' &&\n    global.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?\n    global.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) : compose;\nconst enhancer = composeEnhancers(\n  applyMiddleware(\n    promiseMiddleware,\n    ...middleware\n  )\n)\n\nlet store = createStore(\n  combineReducers,\n  enhancer\n);\n\nexport default store\n","import axios from 'axios';\n\naxios.defaults.withCredentials = true;\n// axios.defaults.baseURL =urlApi\naxios.defaults.headers['User-Token'] = localStorage.getItem('user-token')\n\nlet windowObj = global.windows\n\ninterface ajaxData {\n  data: {},\n  error_code: String,\n  error_msg: String\n}\n\nexport default (store: any) => (next: any) => (action: any) => {\n    const {dispatch, getState} = store;\n    if (typeof action === 'function') {\n        action(dispatch, getState);\n        return;\n    }\n\n    const {\n        promise,\n        type,\n        ...rest\n    } = action;\n\n    if (!action.promise) {\n        return new Promise(function (resolve, reject) {\n            resolve(next(action));\n        })\n    }\n    const [REQUEST, SUCCESS, FAILURE] = type;\n    next({\n        ...rest,\n        type: REQUEST\n    })\n\n    const onFulfilled = (result: {data: ajaxData}) => {\n        if (result && result.data) {\n            // console.log(Number(result.data.error_code))\n            let [errorCode, errorMsg, info] = [result.data.error_code, result.data.error_msg, {}]\n            switch (Number(errorCode)) {\n                case 0: //成功响应\n                    next({\n                        ...rest,\n                        result,\n                        type: SUCCESS\n                    })\n                    break;\n                case 100018: // 登录信息过期\n                     info = {\n                        type: 'fail',\n                        title: errorMsg\n                    }\n                    windowObj.HR.showToast(info, function () {\n                        windowObj.location.href = '/pc/page/login/login.html'\n                    })\n                    break;\n                case 100038:\n                    windowObj.HR.showToast({\n                        type: '',\n                        title: '移交成功'\n                    }, function () {\n                        windowObj.location.href = '/pc/page/login/login.html'\n                    })\n                    break;\n                default: // 默认响应失败\n                    // console.log(action.err)\n                     info = {\n                      type: 'fail',\n                       text: errorMsg,\n                      title: '失败'\n                    }\n                    windowObj.HR.showToast(info)\n            }\n        }\n    }\n\n    const onRejected = (error: any) => {\n        next({\n            ...rest,\n            error,\n            type: FAILURE\n        });\n    }\n\n    return promise(axios)\n      .then(onFulfilled, onRejected)\n      .catch((error: any) => {\n        onRejected(error)\n    })\n}\n","import {\n  GETPUBLICINFO\n} from '../actions/golbal';\n\n/*\n* 初始化state\n */\nconst initState = {};\n/*\n* reducer\n */\nexport default function reducer(state = initState, action: any) {\n    // console.log(action)\n    switch (action.type) {\n        case GETPUBLICINFO[0]:\n          return {\n            ...state,\n            publicInfo:{}\n          };\n        case GETPUBLICINFO[1]:\n          return {\n            ...state,\n            publicInfo: action.result.data.data\n          };\n        case GETPUBLICINFO[2]:\n          return {\n            ...state,\n            publicInfo:{}\n          };\n      default:\n            return state\n    }\n}\n","import {combineReducers} from \"redux\";\n\nimport golbal from './reducers/golbal'\n\nexport default combineReducers({\n  golbal\n})\n","import * as Api from '../api'\n\nexport const AJAX_GET = 'golbal/getAjax'\nexport const AJAX_POST = ['golbal/postAjax','golbal/postAjax/S','golbal/postAjax/E']\nexport const GET_TIME = [\"golbal/GET_TIME\",\"golbal/GET_TIME/S\",\"golbal/GET_TIME/E\"];\nexport const GOLBAL_error_msg = [\"golbal/GOLBAL_error_msg\",\"golbal/GOLBAL_error_msg/S\",\"golbal/GOLBAL_error_msg/E\"];\nexport const GETPUBLICINFO = [\"golbal/GETPUBLICINFO\",\"golbal/GETPUBLICINFO/S\",\"golbal/GETPUBLICINFO/E\"];\n\n// let ajaxFun = function (type, promise, succ, data, url) {\n//   return function (type, promise, succ, data, url) {\n//\n//     return {\n//       type: type,\n//       promise: (ajax: any) => ajax[promise](url, data),\n//       succ\n//     }\n//   }\n// }\n// let dd = () => {}\n// let ddd = ajaxFun('GET_PUBLIC_INFO', 'post', dd, {},'api')\n// 获取服务器时间\nexport function getTime(data: any) {\n    return {\n        type:  GET_TIME,\n        promise: (client: any) => client.post(Api.getTime,data)\n    }\n}\n// 埋错误日志\nexport function buryingErrMsg (data:any) {\n  return {\n    type:  GOLBAL_error_msg,\n    promise: (client: any) => client.post(Api.buryingErrMsg, data)\n  }\n}\n// 获取公共信息\nexport const public_info = function (data: any) {\n  return {\n    type: GETPUBLICINFO,\n    promise: (client: any) => client.post(Api.getPublicInfo, data)\n  }\n}\n","import { registerMicroApps, start } from 'qiankun';\nimport React from \"react\";\nimport ReactDOM from 'react-dom';\n\n/**\n * 渲染子应用\n */\n// @ts-ignore\nfunction Render(props) {\n  const { appContent, loading } = props;\n  return (\n    <>\n      {loading && (\n      <h4 className=\"subapp-loading\">Loading...</h4>\n)}\n  <div dangerouslySetInnerHTML={{ __html: appContent }} />\n  </>\n)\n}\n// @ts-ignore\nfunction render({ appContent, loading }) {\n  const container = document.getElementById('subapp-container');\n  ReactDOM.render(\n    <Render appContent={appContent} loading={loading} />,\n  container,\n)\n}\n// @ts-ignore\nfunction genActiveRule(routerPrefix) {\n  // @ts-ignore\n  return location => location.pathname.startsWith(routerPrefix);\n}\n// console.log(registerMicroApps)\nregisterMicroApps(\n  [\n    { name: 'main-app2', entry: '//localhost:8091', render, activeRule: genActiveRule('/corp') },\n    { name: 'my-app-2', entry: '//localhost:8092', render, activeRule: genActiveRule('/dd') },\n    { name: 'my-app-3', entry: '//localhost:8910', render, activeRule: genActiveRule('/sub_app_3') },\n    //   { name: 'vue app', entry: { scripts: ['//localhost:7100/main.js'] }, render, activeRule: genActiveRule('/vue') },\n  ],\n  {\n    beforeLoad: [\n      // @ts-ignore\n      app => {\n        console.log('[LifeCycle] before load %c%s', 'color: green;', app.name);\n      },\n    ],\n    beforeMount: [\n      // @ts-ignore\n      app => {\n        console.log('[LifeCycle] before mount %c%s', 'color: green;', app.name);\n      },\n    ],\n    afterUnmount: [\n      // @ts-ignore\n      app => {\n        console.log('[LifeCycle] after unmount %c%s', 'color: green;', app.name);\n      },\n    ],\n  }\n);\n\nstart({\n  prefetch: true,\n  jsSandbox: true,\n  singular: true,\n  fetch: window.fetch,\n});\n","import React from 'react';\nimport { Button } from 'antd'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <p>\n          Home\n        </p>\n        <Button type=\"primary\">Button</Button>\n\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","import React, { Component } from \"react\";\nimport {connect} from 'react-redux';\nimport {\n  public_info\n} from '../../redux/model/actions/golbal'\nimport { Dispatch } from 'redux';\n\ninterface MyProps {\n  get_public_info: Function\n}\n\nclass My extends Component<MyProps, {}>{\n  state = {\n    dd: 2\n  }\n  public get_info () {\n    this.props.get_public_info()\n  }\n  public render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <p>\n            MY\n          </p>\n          <button onClick={this.get_info.bind(this)}>获取公共信息</button>\n        </header>\n      </div>\n    );\n  }\n}\n\nconst mapStateProps = (state: any) => {\n  return {\n    publicInfo: state.golbal.publicInfo\n  }\n}\nconst mapDispatchToProps = (dispatch: Dispatch) => {\n  return {\n    get_public_info: (data: any) => {\n      dispatch(public_info(data))\n    }\n  }\n};\n\nexport default connect(mapStateProps, mapDispatchToProps)(My);\n","import React from 'react';\nimport { Route, Switch } from \"react-router-dom\";\nimport './resgisterApps'\n\nimport App from '../views/home/index';\nimport My from '../views/my/index';\n\nconst routes = [\n  {\n    path: \"/home\",\n    tip: \"\",\n    routes: [\n      {\n        path: \"/home/index\",\n        component: App\n      }\n    ]\n  },\n  {\n    path: \"/user\",\n    tip: \"\",\n    routes: [\n      {\n        path: \"/user/index\",\n        component: My\n      }\n    ]\n  }\n];\n\ninterface routeType {\n  path: String,\n  tip: String,\n  routes: {\n    path: any,\n    component: any\n  }[]\n}\n\nfunction RouteWithSubRoutes(route: routeType) {\n  //console.log(route) ;\n  return route.routes.map((rout, i) => {\n    return (<Route key = { i +\"subRoute\" } path= {rout.path} component = {rout.component} />);\n  });\n}\n\nexport default () => (\n  <Switch>\n    {routes.map((route, i) => (\n      // console.log(route)\n      RouteWithSubRoutes(route)\n      // <RouteWithSubRoutes key={i+'route'} {...route} />\n    ))}\n  </Switch>\n)\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './statics/css/index.css';\nimport getRouter from './router/index'\nimport {\n  BrowserRouter as Router,\n  Link\n} from \"react-router-dom\";\nimport {Provider} from 'react-redux'\nimport store from './redux/index'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n    <Router basename={''}>\n      <nav>\n        <ul>\n          <li>\n            <Link to=\"/home/index\">Home</Link>\n          </li>\n          <li>\n            <Link to=\"/user/index\">Users</Link>\n          </li>\n\n          <li>11111111</li>\n          <li>\n            <Link to=\"/dd\">sub_app_2</Link>\n          </li>\n          <li>\n            <Link to=\"/sub_app_3\">sub_app_4</Link>\n          </li>\n        </ul>\n      </nav>\n      {getRouter()}\n      <div id='subapp-container'></div>\n    </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// console.log(process.env.NODE_ENV)\nconsole.log(global.windows)\nlet rootApi =  global.windows && global.windows.urlConfig\nif(process.env.NODE_ENV === 'development'){\n  rootApi = ''\n}\nexport const globalHost = rootApi ;\n// 上面的是老项目的后期删掉\n\nexport const getTime = `${rootApi}/api/Index/getTimeInfo`  //获取服务器时间\nexport const feedbackNeeds = `${rootApi}/api/User/userFeedBack`; // 需求反馈接口\nexport const buryingErrMsg = `${rootApi}/api/front_end/log`; // 错误日志\nexport const getPublicInfo = `${rootApi}/api/index/getPublicInfo`; // 错误日志\n"],"sourceRoot":""}